---
// Componente ContactForm - Captura de leads optimizada para conversi√≥n
export interface Props {
  titulo?: string;
  subtitulo?: string;
  botonTexto?: string;
  mostrarTelefono?: boolean;
  mostrarEmpresa?: boolean;
}

const {
  titulo = "Obt√©n Tu P√°gina Web Gratis Ahora",
  subtitulo = "Completa el formulario y nos pondremos en contacto en menos de 24 horas",
  botonTexto = "Quiero Mi P√°gina Gratis",
  mostrarTelefono = true,
  mostrarEmpresa = true
} = Astro.props;
---

<section id="formulario" class="py-20 bg-gradient-to-br from-blue-50 to-white dark:from-gray-900 dark:to-gray-800 transition-colors duration-300">
  <div class="container-custom">
    <div class="max-w-4xl mx-auto">
      <!-- Card del formulario -->
      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl dark:shadow-2xl dark:shadow-black/20 overflow-hidden">
        <!-- Header del formulario -->
        <div class="bg-gradient-to-r from-blue-600 to-blue-700 dark:from-blue-500 dark:to-blue-600 px-8 py-12 text-center text-white">
          <h2 class="text-3xl sm:text-4xl font-bold mb-4">
            {titulo}
          </h2>
          <p class="text-lg text-blue-100 dark:text-blue-100">
            {subtitulo}
          </p>
          
          <!-- Badges de confianza -->
          <div class="flex flex-wrap justify-center gap-4 mt-6">
            <span class="inline-flex items-center gap-2 px-4 py-2 bg-white/20 dark:bg-white/10 backdrop-blur rounded-full text-sm">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              Sin pagos ocultos
            </span>
            <span class="inline-flex items-center gap-2 px-4 py-2 bg-white/20 dark:bg-white/10 backdrop-blur rounded-full text-sm">
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              Respuesta en 24h
            </span>
          </div>
        </div>
        
        <!-- Formulario -->
        <form class="p-8 space-y-6" id="contact-form">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Nombre -->
            <div>
              <label for="nombre" class="block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2">
                Nombre completo *
              </label>
              <input
                type="text"
                id="nombre"
                name="nombre"
                required
                class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-all duration-200 placeholder-gray-400 dark:placeholder-gray-400"
                placeholder="Juan P√©rez"
              />
            </div>
            
            <!-- Email -->
            <div>
              <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2">
                Correo electr√≥nico *
              </label>
              <input
                type="email"
                id="email"
                name="email"
                required
                class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-all duration-200 placeholder-gray-400 dark:placeholder-gray-400"
                placeholder="juan@ejemplo.com"
              />
            </div>
            
            <!-- Tel√©fono (opcional) -->
            {mostrarTelefono && (
              <div>
                <label for="telefono" class="block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2">
                  Tel√©fono
                  <span class="text-gray-400 dark:text-gray-500 text-xs ml-1">(opcional)</span>
                </label>
                <input
                  type="tel"
                  id="telefono"
                  name="telefono"
                  class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-all duration-200 placeholder-gray-400 dark:placeholder-gray-400"
                  placeholder="+1 234 567 8900"
                />
              </div>
            )}
            
            <!-- Empresa (opcional) -->
            {mostrarEmpresa && (
              <div>
                <label for="empresa" class="block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2">
                  Nombre de tu negocio
                  <span class="text-gray-400 dark:text-gray-500 text-xs ml-1">(opcional)</span>
                </label>
                <input
                  type="text"
                  id="empresa"
                  name="empresa"
                  class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-all duration-200 placeholder-gray-400 dark:placeholder-gray-400"
                  placeholder="Mi Empresa"
                />
              </div>
            )}
          </div>
          
          <!-- Tipo de negocio -->
          <div>
            <label for="tipo-negocio" class="block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2">
              ¬øQu√© tipo de negocio tienes? *
            </label>
            <select
              id="tipo-negocio"
              name="tipo-negocio"
              required
              class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-all duration-200"
            >
              <option value="">Selecciona una opci√≥n</option>
              <option value="restaurante">Restaurante / Comida</option>
              <option value="servicios">Servicios Profesionales</option>
              <option value="tienda">Tienda / E-commerce</option>
              <option value="salud">Salud / Bienestar</option>
              <option value="educacion">Educaci√≥n / Cursos</option>
              <option value="otro">Otro</option>
            </select>
          </div>
          
          <!-- Mensaje -->
          <div>
            <label for="mensaje" class="block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2">
              Cu√©ntanos sobre tu proyecto
              <span class="text-gray-400 dark:text-gray-500 text-xs ml-1">(opcional)</span>
            </label>
            <textarea
              id="mensaje"
              name="mensaje"
              rows="4"
              class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-none placeholder-gray-400 dark:placeholder-gray-400"
              placeholder="Describe brevemente qu√© tipo de p√°gina web necesitas..."
            ></textarea>
          </div>
          
          <!-- Checkbox de t√©rminos -->
          <div class="flex items-start">
            <input
              type="checkbox"
              id="terminos"
              name="terminos"
              required
              class="mt-1 w-4 h-4 text-blue-600 dark:text-blue-400 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 dark:bg-gray-700"
            />
            <label for="terminos" class="ml-2 text-sm text-gray-600 dark:text-gray-300">
              Acepto recibir informaci√≥n sobre mi p√°gina web gratis y entiendo que no hay costos ocultos *
            </label>
          </div>
          
          <!-- Bot√≥n de env√≠o -->
          <button
            type="submit"
            class="w-full py-4 px-6 bg-gradient-to-r from-blue-600 to-blue-700 dark:from-blue-500 dark:to-blue-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-blue-800 dark:hover:from-blue-400 dark:hover:to-blue-500 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 focus:ring-blue-500 transition-all duration-200 transform hover:scale-[1.02]"
          >
            {botonTexto}
          </button>
          
          <!-- Mensaje de √©xito (oculto por defecto) -->
          <div id="mensaje-exito" class="hidden p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg">
            <p class="text-green-800 dark:text-green-300 font-medium">
              ¬°Gracias! Hemos recibido tu solicitud y te contactaremos pronto.
            </p>
          </div>
        </form>
      </div>
      
      <!-- Garant√≠as adicionales -->
      <div class="mt-8 text-center text-gray-600 dark:text-gray-400">
        <p class="mb-4">
          üîí Tus datos est√°n seguros y no los compartiremos con terceros
        </p>
        <div class="flex flex-wrap justify-center gap-6 text-sm">
          <span class="flex items-center gap-2">
            <svg class="w-5 h-5 text-green-500 dark:text-green-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            100% Gratis
          </span>
          <span class="flex items-center gap-2">
            <svg class="w-5 h-5 text-green-500 dark:text-green-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            Sin compromisos
          </span>
          <span class="flex items-center gap-2">
            <svg class="w-5 h-5 text-green-500 dark:text-green-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            Respuesta r√°pida
          </span>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Manejo b√°sico del formulario
  const form = document.getElementById('contact-form') as HTMLFormElement;
  const mensajeExito = document.getElementById('mensaje-exito');
  
  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    // Aqu√≠ puedes agregar la l√≥gica para enviar el formulario
    // Por ahora, solo mostramos el mensaje de √©xito
    
    // Simular env√≠o
    const boton = form.querySelector('button[type="submit"]') as HTMLButtonElement;
    boton.textContent = 'Enviando...';
    boton.disabled = true;
    
    // Simular delay de env√≠o
    setTimeout(() => {
      form.style.display = 'none';
      mensajeExito?.classList.remove('hidden');
      
      // Scroll suave al mensaje
      mensajeExito?.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }, 1500);
  });
</script>